@model SisRent.Vista.Models.RentarViewModel
@{
    ViewBag.Title = "Rentar Vehículo";
    var listaComunas = Model.ListaComunas;
    var urlBase = System.Configuration.ConfigurationManager.AppSettings.Get("UrlBase");
}
<div class="text-center">
    <h2>Cotización de Vehículo</h2>
</div>
<hr />
<div>
    <p class="h4">1. Itinerario</p>
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                <label for="ddlRetiro">Comuna de retiro</label>
                <select class="form-control select2" name="ddlRetiro" id="ddlRetiro">
                    <option value="">Seleccione una comuna</option>
                    @foreach (var item in listaComunas)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                </select>
            </div>
        </div>
        <div class="col-md-4 col-md-offset-1">
            <div class="form-group">
                <label for="tbFechaRetiro">Fecha de retiro</label>
                <input type="text" class="form-control" name="tbFechaRetiro" id="tbFechaRetiro">
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="tbHoraRetiro">Hora de retiro</label>
                <input type="text" class="form-control" name="tbHoraRetiro" id="tbHoraRetiro">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <div class="form-group">
                <label for="ddlEntrega">Comuna de entrega</label>
                <select class="form-control select2" name="ddlEntrega" id="ddlEntrega">
                    <option value="">Seleccione una comuna</option>
                    @foreach (var item in listaComunas)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                </select>
            </div>
        </div>
        <div class="col-md-4 col-md-offset-1">
            <div class="form-group">
                <label for="tbFechaEntrega">Fecha de entrega</label>
                <input type="text" class="form-control" name="tbFechaEntrega" id="tbFechaEntrega">
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="tbHoraEntrega">Hora de entrega</label>
                <input type="text" class="form-control" name="tbHoraEntrega" id="tbHoraEntrega">
            </div>
        </div>
    </div>
</div>
<hr />
<div>
    <p class="h4">2. Seleccione un vehículo</p>
    <ul class="nav nav-pills" data-toggle="buttons">
        @foreach (var vehiculo in Model.ListaVehiculos.Where(o => o.Estado))
        {
            <li class="thumbnail">
                <input type="radio" name="options" id="option1" autocomplete="off" checked>
                <img src="@(urlBase + vehiculo.RutaImagen)" class="img-rounded img-responsive" alt="Imagen Auto" style="width: 340px" />
                <p class="text-center">
                    Marca: @vehiculo.Marca
                    <br />Modelo: @vehiculo.Modelo
                    <br />Año: @vehiculo.Anio
                    <br /><strong>Valor diario: $ @vehiculo.Valor.ToString("N0").-</strong>
                </p>
            </li>
            <li class="thumbnail">
                <input type="radio" name="options" id="option2" autocomplete="off">
                <img src="@(urlBase + vehiculo.RutaImagen)" class="img-rounded img-responsive" alt="Imagen Auto" style="width: 340px" />
                <p class="text-center">
                    Marca: @vehiculo.Marca
                    <br />Modelo: @vehiculo.Modelo
                    <br />Año: @vehiculo.Anio
                    <br /><strong>Valor diario: $ @vehiculo.Valor.ToString("N0").-</strong>
                </p>
            </li>
        }
    </ul>
</div>
<hr />
<div>
    <p class="h4">3. Servicios adicionales</p>
    <ul class="nav nav-pills">
        @foreach (var servicio in Model.ListaServicios.Where(o => o.Estado))
        {
            <li><a href="#" data-toggle="tab" aria-expanded="true">@servicio.Servicio $ @servicio.Valor.ToString("N0").-</a></li>
        }
    </ul>
</div>
<hr />
<div>
    <p class="h4">4. Datos para el pago</p>
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label for="tbNombres">Nombre(s)</label>
                <input type="text" class="form-control" name="tbNombres" id="tbNombres">
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="tbApellidos">Apellido(s)</label>
                <input type="text" class="form-control" name="tbApellidos" id="tbApellidos">
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="tbEmail">Email</label>
                <input type="text" class="form-control" name="tbEmail" id="tbEmail">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label for="tbDireccion">Dirección</label>
                <input type="text" class="form-control" name="tbDireccion" id="tbDireccion">
            </div>
        </div>
        <div class="col-md-3">
            <div class="form-group">
                <label for="ddlComuna">Comuna</label>
                <select class="form-control select2" name="ddlComuna" id="ddlComuna">
                    <option value="">Seleccione una comuna</option>
                    @foreach (var item in listaComunas)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                </select>
            </div>
        </div>
        <div class="col-md-4 col-md-offset-1">
            <div class="form-group">
                <label for="tbTelefono">Teléfono</label>
                <input type="text" class="form-control" name="tbTelefono" id="tbTelefono">
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <div class="checkbox">
            <label>
                <input type="checkbox" name="chkCondiciones" id="chkCondiciones">
                Aceptar todos los <a href="#" data-toggle="modal" data-target="#modal-condiciones">términos y condiciones</a>
            </label>
        </div>
    </div>
    <div class="col-md-6">
        <div class="pull-right">
            <button type="button" id="btnAceptar" name="btnAceptar" class="btn btn-lg btn-success">Total a pagar: $ 0.-</button>
        </div>
    </div>
</div>
<div class="modal fade" id="modal-condiciones" data-keyboard="disable" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title text-center">Términos y condiciones</h4>
            </div>
            <div class="modal-body">
                <p>bla bla bla</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-warning pull-left" id="btnCancelarCondiciones">Cancelar</button>
                <button type="button" class="btn btn-success" id="btnAceptarCondiciones">Aceptar términos y condiciones</button>
            </div>
        </div>
    </div>
</div>
@section Styles
{
    @Styles.Render("~/Styles/select2")
}
@section Scripts
{
    @Scripts.Render("~/Scripts/select2")
    <script>
        function CalcularTotal() {
            var valorAuto = 1000;
            var valorServicios = 2000;
            var total = valorAuto + valorServicios;
            $("#btnAceptar").text("Total a pagar: $ " + total + ".-");
        }

        $(document).ready(function () {
            $(".select2").select2();
        });

        $(document).on("click", "#btnAceptarCondiciones", function () {
            $("#chkCondiciones").prop("checked", true);
            $("#modal-condiciones").modal("hide");
        });

        $(document).on("click", "#btnCancelarCondiciones", function () {
            $("#chkCondiciones").prop("checked", false);
            $("#modal-condiciones").modal("hide");
        });

        $(document).on("click", "#btnAceptar", function () {
            CalcularTotal();
        });
    </script>
}